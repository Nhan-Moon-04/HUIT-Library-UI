<div class="login-container">
    <div class="login-wrapper">
        <!-- Header -->
        <div class="login-header">
            <div class="logo-section">
                <div class="logo-placeholder">
                    <i class="fas fa-university"></i>
                </div>
                <div class="university-info">
                    <h1 class="university-name">TRƯỜNG ĐẠI HỌC CÔNG NGHIỆP TP.HCM</h1>
                    <h2 class="system-name">HỆ THỐNG THƯ VIỆN ĐIỆN TỬ</h2>
                </div>
            </div>
        </div>

        <!-- Login Form -->
        <div class="login-form-container">
            <div class="form-card">
                <div class="form-header">
                    <h3 class="form-title">Đăng nhập hệ thống</h3>
                    <p class="form-subtitle">Vui lòng nhập thông tin đăng nhập của bạn</p>
                </div>

                <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
                    <!-- Error Message -->
                    @if (errorMessage()) {
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        {{ errorMessage() }}
                    </div>
                    }

                    <!-- Mã đăng nhập -->
                    <div class="form-group">
                        <label for="maDangNhap" class="form-label">
                            <i class="fas fa-user"></i>
                            Mã đăng nhập
                        </label>
                        <input type="text" id="maDangNhap" formControlName="maDangNhap" class="form-input"
                            [class.error]="isFieldInvalid('maDangNhap')"
                            placeholder="Nhập mã sinh viên hoặc mã nhân viên" autocomplete="username" />
                        @if (isFieldInvalid('maDangNhap')) {
                        <div class="error-message">
                            <i class="fas fa-exclamation-triangle"></i>
                            {{ getFieldError('maDangNhap') }}
                        </div>
                        }
                    </div>

                    <!-- Mật khẩu -->
                    <div class="form-group">
                        <label for="matKhau" class="form-label">
                            <i class="fas fa-lock"></i>
                            Mật khẩu
                        </label>
                        <div class="password-input-wrapper">
                            <input [type]="showPassword() ? 'text' : 'password'" id="matKhau" formControlName="matKhau"
                                class="form-input" [class.error]="isFieldInvalid('matKhau')" placeholder="Nhập mật khẩu"
                                autocomplete="current-password" />
                            <button type="button" class="password-toggle" (click)="togglePasswordVisibility()"
                                [attr.aria-label]="showPassword() ? 'Ẩn mật khẩu' : 'Hiện mật khẩu'">
                                <i [class]="showPassword() ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                            </button>
                        </div>
                        @if (isFieldInvalid('matKhau')) {
                        <div class="error-message">
                            <i class="fas fa-exclamation-triangle"></i>
                            {{ getFieldError('matKhau') }}
                        </div>
                        }
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="submit-btn" [disabled]="loginForm.invalid || authService.isLoading()">
                        @if (authService.isLoading()) {
                        <i class="fas fa-spinner fa-spin"></i>
                        Đang đăng nhập...
                        } @else {
                        <i class="fas fa-sign-in-alt"></i>
                        Đăng nhập
                        }
                    </button>

                    <!-- Links -->
                    <div class="form-links">
                        <a href="/forgot-password" class="link">Quên mật khẩu?</a>
                        <span class="separator">|</span>
                        <a href="/register" class="link">Đăng ký tài khoản mới</a>
                    </div>
                </form>
            </div>
        </div>

        <!-- Footer -->
        <div class="login-footer">
            <p>&copy; 2024 Trường Đại học Công nghiệp TP.HCM - Thư viện điện tử</p>
            <p>Hỗ trợ kỹ thuật: support@huit.edu.vn | Hotline: (028) 3857 4647</p>
        </div>
    </div>
</div>