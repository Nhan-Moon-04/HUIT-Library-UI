<div class="chat-page" *ngIf="isPageMode()">
    <!-- Chat as full page -->
    <div class="chat-page-header">
        <h2>Há»— trá»£ trá»±c tuyáº¿n</h2>
        <p>TrÃ² chuyá»‡n vá»›i trá»£ lÃ½ thÆ° viá»‡n HUIT</p>
    </div>

    <div class="chat-page-container">
        <div class="chat-page-body" #chatBody>
            <div *ngFor="let m of messages()" class="message" [class.user-message]="!m.laBot"
                [class.bot-message]="m.laBot">
                <div class="message-wrapper">
                    <div class="avatar">
                        <i *ngIf="m.laBot" class="bot-icon">ðŸ¤–</i>
                        <i *ngIf="!m.laBot" class="user-icon">ðŸ‘¤</i>
                    </div>
                    <div class="message-content">
                        <div class="message-bubble">{{ m.noiDung }}</div>
                        <div class="message-time" *ngIf="m.thoiGianGui">
                            {{ formatTime(m.thoiGianGui) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="chat-page-footer">
            <input [ngModel]="draft()" (ngModelChange)="draft.set($event)" (keydown.enter)="send()"
                placeholder="Nháº­p tin nháº¯n..." />
            <button (click)="send()">Gá»­i</button>
        </div>
    </div>
</div>

<div class="chat-widget" *ngIf="!isPageMode()">
    <button class="chat-toggle" (click)="toggle()" aria-label="Chat">
        <span *ngIf="!isOpen()" class="dot">ðŸ’¬</span>
        <span *ngIf="isOpen()" class="close">âœ•</span>
    </button>

    <div class="chat-panel" *ngIf="isOpen()">
        <div class="chat-header">Trá»£ lÃ½ thÆ° viá»‡n</div>
        <div class="chat-body" #chatBody>
            <div *ngFor="let m of messages()" class="message" [class.user-message]="!m.laBot"
                [class.bot-message]="m.laBot">
                <div class="message-wrapper">
                    <div class="avatar">
                        <i *ngIf="m.laBot" class="bot-icon">ðŸ¤–</i>
                        <i *ngIf="!m.laBot" class="user-icon">ðŸ‘¤</i>
                    </div>
                    <div class="message-content">
                        <div class="message-bubble">{{ m.noiDung }}</div>
                        <div class="message-time" *ngIf="m.thoiGianGui">
                            {{ formatTime(m.thoiGianGui) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="chat-footer">
            <input [ngModel]="draft()" (ngModelChange)="draft.set($event)" (keydown.enter)="send()"
                placeholder="Nháº­p tin nháº¯n..." />
            <button (click)="send()">Gá»­i</button>
        </div>
    </div>
</div>