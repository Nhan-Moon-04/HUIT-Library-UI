<div class="change-password-page">
    <!-- Hero -->
    <header class="password-hero">
        <div class="hero-inner">
            <h1>Đổi mật khẩu</h1>
            <p>Cập nhật mật khẩu để bảo vệ tài khoản của bạn</p>
        </div>
    </header>

    <main class="password-main">
        <div *ngIf="loading()" class="loading">Đang xử lý...</div>

        <div *ngIf="!loading()" class="password-container">
            <!-- LEFT -->
            <div class="password-left-card">
                <div class="security-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h2>Bảo mật tài khoản</h2>
                <div class="security-info">
                    <p>Mật khẩu mạnh giúp bảo vệ tài khoản của bạn khỏi các mối đe dọa bảo mật.</p>
                </div>
                <button class="btn full outline" (click)="router.navigate(['/profile'])">
                    <i class="fas fa-arrow-left"></i>
                    Quay về hồ sơ
                </button>
            </div>

            <!-- RIGHT -->
            <div class="password-right-card">
                <form [formGroup]="form" (ngSubmit)="submit()">
                    <div class="form-row">
                        <label>Mật khẩu hiện tại *</label>
                        <input type="password" formControlName="currentPassword"
                            [class.error]="isFieldInvalid('currentPassword')" placeholder="Nhập mật khẩu hiện tại" />
                        <div *ngIf="isFieldInvalid('currentPassword')" class="error-message">
                            {{ getFieldError('currentPassword') }}
                        </div>
                    </div>

                    <div class="form-row">
                        <label>Mật khẩu mới *</label>
                        <input type="password" formControlName="newPassword"
                            [class.error]="isFieldInvalid('newPassword')"
                            placeholder="Nhập mật khẩu mới (tối thiểu 6 ký tự)" />
                        <div *ngIf="isFieldInvalid('newPassword')" class="error-message">
                            {{ getFieldError('newPassword') }}
                        </div>
                    </div>

                    <div class="form-row">
                        <label>Xác nhận mật khẩu mới *</label>
                        <input type="password" formControlName="confirmPassword"
                            [class.error]="isFieldInvalid('confirmPassword')" placeholder="Nhập lại mật khẩu mới" />
                        <div *ngIf="isFieldInvalid('confirmPassword')" class="error-message">
                            {{ getFieldError('confirmPassword') }}
                        </div>
                    </div>

                    <div *ngIf="message()" class="message" [class]="getMessageClass()">
                        <i [class]="getMessageIcon()"></i>
                        {{ message() }}
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn primary" [disabled]="form.invalid || isSubmitting()">
                            <span *ngIf="isSubmitting()">Đang xử lý...</span>
                            <span *ngIf="!isSubmitting()">Đổi mật khẩu</span>
                        </button>
                        <button type="button" class="btn outline" (click)="resetForm()" [disabled]="isSubmitting()">
                            Đặt lại
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </main>
</div>