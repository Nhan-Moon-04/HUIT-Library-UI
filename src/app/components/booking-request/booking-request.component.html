<div class="booking-page">
    <h2>Yêu cầu mượn phòng</h2>

    @if (loading()) {
    <div class="loading">Đang gửi...</div>
    }
    @if (success()) {
    <div class="success">{{ success() }}</div>
    }
    @if (error()) {
    <div class="error">{{ error() }}</div>
    }

    <form (ngSubmit)="submit()" [formGroup]="form" novalidate>
        <div class="form-row">
            <label>Loại phòng</label>
            <select formControlName="maLoaiPhong">
                <option value="">-- Chọn loại phòng --</option>
                @for (roomType of roomTypes(); track roomType.maLoaiPhong) {
                <option [value]="roomType.maLoaiPhong">
                    {{ roomType.tenLoaiPhong }} - {{ roomType.viTri }}
                </option>
                }
            </select>
            @if (form.get('maLoaiPhong')?.value) {
            <div class="room-info">
                @if (getSelectedRoomType(); as selectedRoom) {
                <div class="selected-room-details">
                    <p><strong>Mô tả:</strong> {{ selectedRoom.moTa }}</p>
                    <p><strong>Trang thiết bị:</strong> {{ selectedRoom.trangThietBi }}</p>
                    <p><strong>Số lượng chỗ ngồi:</strong> {{ selectedRoom.soLuongChoNgoi }}</p>
                    <p><strong>Thời gian sử dụng:</strong> {{ selectedRoom.thoiGianSuDung }}</p>
                </div>
                }
            </div>
            }
        </div>

        <div class="form-row">
            <label>Thời gian bắt đầu</label>
            <input formControlName="thoiGianBatDau" type="datetime-local" />
        </div>

        <div class="form-row">
            <label>Thời gian kết thúc</label>
            <input formControlName="thoiGianKetThuc" type="datetime-local" />
        </div>

        <div class="form-row">
            <label>Mục đích sử dụng</label>
            <textarea formControlName="lyDo"></textarea>
        </div>

        <div class="actions">
            <button type="submit" class="btn primary">Gửi yêu cầu</button>
        </div>
    </form>
</div>