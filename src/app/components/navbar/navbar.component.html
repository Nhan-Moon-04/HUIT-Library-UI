<nav class="navbar">
  <div class="navbar-container">
    <!-- Brand -->
    <div class="navbar-brand d-flex align-items-center">
      <img src="https://virtual-event.huit.edu.vn/static/huit/logo-en.png" alt="HUIT Logo" class="brand-logo me-3" />
      <div class="brand-text">
        <h1 class="brand-title">THƯ VIỆN ĐẠI HỌC CÔNG THƯƠNG TP.HCM</h1>
        <p class="brand-subtitle">HỆ THỐNG QUẢN LÝ TÀI NGUYÊN PHÒNG HỌP</p>
      </div>
    </div>

    <!-- Navigation Links -->
    <div class="navbar-nav">
      <a [routerLink]="getHomeLink()" class="nav-link" [class.active]="isActiveRoute(getHomeLink())">
        <i class="fas fa-home"></i><span>Trang chủ</span>
      </a>
      <a routerLink="/room-search" class="nav-link" [class.active]="isActiveRoute('/room-search')">
        <i class="fas fa-search"></i><span>Tra cứu</span>
      </a>
      <a routerLink="/booking/create" class="nav-link" [class.active]="isActiveRoute('/booking')">
        <i class="fas fa-calendar-plus"></i><span>Đặt phòng</span>
      </a>
      <a routerLink="/bookings" class="nav-link" [class.active]="isActiveRoute('/bookings')">
        <i class="fas fa-list"></i><span>Phòng đang mượn</span>
      </a>
      <a routerLink="/bookings/history" class="nav-link" [class.active]="isActiveRoute('/bookings/history')">
        <i class="fas fa-history"></i><span>Lịch sử</span>
      </a>
    </div>

    <!-- User Info -->
    <div class="navbar-user">
      <!-- Notification Dropdown -->
      <div class="notification-dropdown" (click)="toggleNotification()">
        <div class="notification-icon">
          <i class="fas fa-bell"></i>
          <span class="notification-badge" *ngIf="unreadCount > 0">{{ unreadCount > 99 ? '99+' : unreadCount }}</span>
        </div>
        <div class="notification-menu" [class.show]="isNotificationOpen">
          <div class="notification-header">
            <span>Thông báo</span>
            <button *ngIf="unreadCount > 0" (click)="markAllAsRead()" class="mark-all-read-btn">
              Đánh dấu đã đọc tất cả
            </button>
          </div>
          <div class="notification-list">
            <div *ngIf="notifications.length === 0" class="no-notifications">
              Không có thông báo
            </div>
            <div *ngFor="let notification of notifications" class="notification-item"
              [class.unread]="!notification.daDoc" [routerLink]="['/notifications', notification.maThongBao]"
              (click)="closeNotification()">
              <div class="notification-content">
                <h6 class="notification-title">{{ notification.tieuDe }}</h6>
                <p class="notification-text">{{ notification.noiDung }}</p>
                <small class="notification-time">{{ notification.ngayTao | date:'dd/MM/yyyy HH:mm' }}</small>
              </div>
              <div *ngIf="!notification.daDoc" class="unread-indicator"></div>
            </div>
          </div>
          <div class="notification-footer">
            <a routerLink="/notifications" (click)="closeNotification()">Xem tất cả thông báo</a>
          </div>
        </div>
      </div>

      <div class="user-dropdown" (click)="toggleDropdown()">
        <div class="user-avatar">
          <i class="fas fa-user-circle"></i>
        </div>
        <div class="dropdown-menu" [class.show]="isDropdownOpen">
          <a routerLink="/profile" class="dropdown-item" (click)="closeDropdown()">
            <i class="fas fa-user-cog"></i>
            <span>Cài đặt tài khoản</span>
          </a>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item logout-item" (click)="logout()">
            <i class="fas fa-sign-out-alt"></i>
            <span>Đăng xuất</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</nav>