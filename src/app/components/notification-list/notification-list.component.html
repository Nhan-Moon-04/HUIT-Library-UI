<div class="notification-page">
    <div class="header">
        <h2>Thông báo</h2>
        <button class="refresh-btn" (click)="loadNotifications()" [disabled]="loading()">
            <i class="fas fa-sync-alt" [class.spinning]="loading()"></i>
            Làm mới
        </button>
    </div>

    @if (loading()) {
    <div class="loading">Đang tải thông báo...</div>
    }

    @if (error()) {
    <div class="error">{{ error() }}</div>
    }

    @if (!loading() && notifications().length === 0) {
    <div class="empty-state">
        <i class="fas fa-bell-slash"></i>
        <p>Không có thông báo nào</p>
    </div>
    }

    @if (!loading() && notifications().length > 0) {
    <div class="notification-list">
        @for (notification of notifications(); track notification.maThongBao) {
        <div class="notification-item" [class.unread]="!notification.daDoc"
            [routerLink]="['/notifications', notification.maThongBao]">
            <div class="notification-header">
                <h3>{{ notification.tieuDe }}</h3>
                <div class="notification-meta">
                    <span class="time">{{ formatDate(notification.thoiGian) }}</span>
                    @if (!notification.daDoc) {
                    <span class="unread-indicator">Chưa đọc</span>
                    }
                </div>
            </div>
            <p class="notification-content">{{ notification.noiDung }}</p>
        </div>
        }
    </div>
    }
</div>